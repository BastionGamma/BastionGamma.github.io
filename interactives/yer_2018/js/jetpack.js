!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection"),require("d3-transition"),require("d3-array"),require("d3-axis"),require("d3-scale"),require("d3-collection"),require("d3-queue"),require("d3-request"),require("d3-timer")):"function"==typeof define&&define.amd?define(["exports","d3-selection","d3-transition","d3-array","d3-axis","d3-scale","d3-collection","d3-queue","d3-request","d3-timer"],e):e(t.d3=t.d3||{},t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3,t.d3)}(this,function(t,e,n,r,i,o,a,s,l,u){"use strict";var p=function(t,e){var n=this.node();return n?n.getBBox?this.attr("transform",function(n,r){var i="function"==typeof t?t.call(this,n,r):t;return 0===e?i=[i,0]:1===e&&(i=[0,i]),"translate("+i[0]+","+i[1]+")"}):this.style("transform",function(n,r){var i="function"==typeof t?t.call(this,n,r):t;return 0===e?i=[i,0]:1===e&&(i=[0,i]),"translate("+i[0]+"px,"+i[1]+"px)"}):this},c=function(t){if("string"==typeof t){var e,n={},r=t.split(/([\.#])/g);for(t=r.shift();e=r.shift();)"."==e?n.class=n.class?n.class+" "+r.shift():r.shift():"#"==e&&(n.id=r.shift());return{tag:t,attr:n}}return t};function h(){return null}var f=function(t,e){if("object"==typeof t){for(var n in t)this.attr(n.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase(),t[n]);return this}return 1==arguments.length?this.attr(t):this.attr(t,e)};function d(){for(var t=arguments,e=0,n=t.length;e<n;)"string"!=typeof t[e]&&"number"!=typeof t[e]||(t[e]=function(t){return function(e){return e[t]}}(t[e])),e++;return function(e){for(var n=0,r=t.length;n++<r;)e=t[n-1].call(this,e);return e}}d.not=function(t){return!t},d.run=function(t){return t()},d.objToFn=function(t,e){return 1==arguments.length&&(e=void 0),function(n){return void 0!==t[n]?t[n]:e}};var g=function(t,e){if("object"==typeof t){for(var n in t)r(this,n,t[n]);return this}return 1==arguments.length?this.style(t):r(this,t,e);function r(t,e,n){e=e.replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase();var r;return~"top left bottom right padding-top padding-left padding-bottom padding-right border-top b-width border-left-width border-botto-width m border-right-width  margin-top margin-left margin-bottom margin-right font-size width height stroke-width line-height margin padding border border-radius max-width min-width".indexOf(e)?t.style(e,"function"==typeof n?(r=n,function(){var t=r.apply(this,arguments);return i(t)}):i(n)):t.style(e,n),t}function i(t){return t.match?t:t+"px"}},y={A:7,a:7,B:8,b:7,C:8,c:6,D:9,d:7,E:7,e:7,F:7,f:4,G:9,g:7,H:9,h:7,I:3,i:3,J:5,j:3,K:8,k:6,L:7,l:3,M:11,m:11,N:9,n:7,O:9,o:7,P:8,p:7,Q:9,q:7,R:8,r:4,S:8,s:6,T:7,t:4,U:9,u:7,V:7,v:6,W:11,w:9,X:7,x:6,Y:7,y:6,Z:7,z:5,".":2,",":2,":":2,";":2},m=function(t,e,n){return Math.max(t,Math.min(n,e))};function v(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function x(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,l=t[1],u=n[1],p=e[1]-l,c=r[1]-u,h=(s*(l-u)-c*(i-o))/(c*a-s*p);return[i+h*a,l+h*p]}function w(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}var b={},A={},q={};e.selection.prototype.translate=p,n.transition.prototype.translate=p,e.selection.prototype.append=function(t){var n,r;"function"==typeof t?n=t:(r=c(t),n=e.creator(r.tag));var i=this.select(function(){return this.appendChild(n.apply(this,arguments))});if(r)for(var o in r.attr)i.attr(o,r.attr[o]);return i},e.selection.prototype.insert=function(t,n){var r=c(t),i=e.creator(r.tag),o=null==n?h:"function"==typeof n?n:e.selector(n),a=this.select(function(){return this.insertBefore(i.apply(this,arguments),o.apply(this,arguments)||null)});for(var s in r.attr)a.attr(s,r.attr[s]);return a},e.selection.prototype.parent=function(){var t=[];return this.filter(function(){return!(t.indexOf(this.parentNode)>-1||(t.push(this.parentNode),0))}).select(function(){return this.parentNode})},e.selection.prototype.selectAppend=function(t){var n,r=e.selector(t),i=c(t);t=e.creator(i.tag),n=this.select(function(){return r.apply(this,arguments)||this.appendChild(t.apply(this,arguments))});for(var o in i.attr)n.attr(o,i.attr[o]);return n},e.selection.prototype.tspans=function(t,e){return this.selectAll("tspan").data(function(e){return("function"==typeof t?t(e):t).map(function(t){return{line:t,parent:e}})}).enter().append("tspan").text(function(t){return t.line}).attr("x",0).attr("dy",function(t,n){return n?("function"==typeof e?e(t.parent,t.line,n):e)||15:0})},e.selection.prototype.appendMany=function(t,e){if("string"==typeof e){console.warn("DEPRECATED: jetpack's appendMany order of arguments has changed. It's appendMany('div', data) from now on");var n=e;e=t,t=n}return this.selectAll(null).data(e).enter().append(t)},e.selection.prototype.at=f,e.selection.prototype.st=g,n.transition.prototype.at=f,n.transition.prototype.st=g,e.selection.prototype.prop=e.selection.prototype.property,t.wordwrap=function(t,e,n,i){var o,a,s,l,u,p,c=[],h=[],f=[];return(a=t.split(" ")).forEach(function(t,e){var n=t.split("-"),r=e<a.length-1?" ":"";n.length>1?n.forEach(function(t,e){h.push(t+(e<n.length-1?"-":r))}):h.push(t+r)}),s=e||40,l=n||Math.max(3,Math.min(.5*s,.75*h.map(function(t){return t.length}).sort(function(t,e){return t-e})[Math.round(h.length/2)])),u=s*y.a,p=l*y.a,o=0,h.forEach(function(t){var e=r.sum(t.split("").map(d));return o+e>u&&o>p&&(c.push(f.join("")),f.length=0,o=0),o+=e,f.push(t)}),f.length&&c.push(f.join("")),c.filter(function(t){return""!==t});function d(t){return!i&&y[t]||y.a}},t.parseAttributes=c,t.f=d,t.ascendingKey=function(t){return"function"==typeof t?function(e,n){return t(e)<t(n)?-1:t(e)>t(n)?1:t(e)>=t(n)?0:NaN}:function(e,n){return e[t]<n[t]?-1:e[t]>n[t]?1:e[t]>=n[t]?0:NaN}},t.descendingKey=function(t){return"function"==typeof t?function(e,n){return t(n)<t(e)?-1:t(n)>t(e)?1:t(n)>=t(e)?0:NaN}:function(e,n){return n[t]<e[t]?-1:n[t]>e[t]?1:n[t]>=e[t]?0:NaN}},t.conventions=function(t){(t=t||{}).margin=t.margin||{},["top","right","bottom","left"].forEach(function(e){t.margin[e]||0===t.margin[e]||(t.margin[e]=20)}),t.parentSel&&(t.sel=t.parentSel);var n=t.sel&&t.sel.node();return t.totalWidth=t.totalWidth||n&&n.offsetWidth||960,t.totalHeight=t.totalHeight||n&&n.offsetHeight||500,t.width=t.width||t.totalWidth-t.margin.left-t.margin.right,t.height=t.height||t.totalHeight-t.margin.top-t.margin.bottom,t.totalWidth=t.width+t.margin.left+t.margin.right,t.totalHeight=t.height+t.margin.top+t.margin.bottom,t.sel=t.sel||e.select("body"),t.sel.st({position:"relative",height:t.totalHeight,width:t.totalWidth}),t.x=t.x||o.scaleLinear().range([0,t.width]),t.y=t.y||o.scaleLinear().range([t.height,0]),t.xAxis=t.xAxis||i.axisBottom().scale(t.x),t.yAxis=t.yAxis||i.axisLeft().scale(t.y),t.layers=(t.layers||"s").split("").map(function(e){var n;if("s"==e)n=t.sel.append("svg").st({position:t.layers?"absolute":""}).attr("width",t.totalWidth).attr("height",t.totalHeight).append("g").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),t.svg||(t.svg=n);else if("c"==e){var r=window.devicePixelRatio||1;(n=t.sel.append("canvas").at({width:t.totalWidth*r,height:t.totalHeight*r}).st({width:t.totalWidth,height:t.totalHeight}).st({position:"absolute"}).node().getContext("2d")).scale(r,r),n.translate(t.margin.left,t.margin.top)}else"d"==e&&(n=t.sel.append("div").st({position:"absolute",left:t.margin.left,top:t.margin.top,width:t.width,height:t.height}));return n}),t},t.drawAxis=function(t){return{xAxisSel:t.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+t.height+")").call(t.xAxis),yAxisSel:t.svg.append("g").attr("class","y axis").call(t.yAxis)}},t.attachTooltip=function(t,n,r){if(t.size()){n=n||e.select(".tooltip"),t.on("mouseover.attachTooltip",function(t){n.classed("tooltip-hidden",!1).html("").appendMany("div",r).html(function(e){return e(t)}),e.select(this).classed("tooltipped",!0)}).on("mousemove.attachTooltip",function(t){if(n.size()){var r=e.event,i=r.clientX,o=r.clientY,a=n.node().getBoundingClientRect(),s=m(20,i-a.width/2,window.innerWidth-a.width-20),l=innerHeight>o+20+a.height?o+20:o-a.height-20;n.style("left",s+"px").style("top",l+"px")}}).on("mouseout.attachTooltip",function(t){n.classed("tooltip-hidden",!0),e.selectAll(".tooltipped").classed("tooltipped",!1)}).on("click.attachTooltip",function(t){console.log(t)});var i=t.datum();r=r||a.keys(i).filter(function(t){return"object"!=typeof i[t]&&"array"!=i[t]}).map(function(t){return function(e){return t+": <b>"+e[t]+"</b>"}})}},t.loadData=function(){var t=s.queue(),e=[].slice.call(arguments),n=e.slice(0,e.length-1),r=e[e.length-1];n.forEach(function(e){var n=e.split("?")[0].split(".").reverse()[0],i={csv:l.csv,tsv:l.tsv,json:l.json}[n];if(!i)return r(new Error("Invalid type",e));t.defer(i,e)}),t.awaitAll(r)},t.nestBy=function(t,e){return a.nest().key(e).entries(t).map(function(t){return t.values.key=t.key,t.values})},t.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)},t.clamp=m,t.polygonClip=function(t,e){for(var n,r,i,o,a,s,l=w(e),u=-1,p=t.length-w(t),c=t[p-1];++u<p;){for(n=e.slice(),e.length=0,o=t[u],a=n[(i=n.length-l)-1],r=-1;++r<i;)v(s=n[r],c,o)?(v(a,c,o)||e.push(x(a,s,c,o)),e.push(s)):v(a,c,o)&&e.push(x(a,s,c,o)),a=s;l&&e.push(e[0]),c=o}return e},t.timer=function(t,e,n,r){b[r]&&b[r].stop();var i=u.timer(t,e,n,r);return r&&(b[r]=i),i},t.interval=function(t,e,n,r){A[r]&&A[r].stop();var i=u.interval(t,e,n,r);return r&&(A[r]=i),i},t.timeout=function(t,e,n,r){q[r]&&q[r].stop();var i=u.timeout(t,e,n,r);return r&&(q[r]=i),i},Object.defineProperty(t,"__esModule",{value:!0})});